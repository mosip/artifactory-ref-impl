name: Create Pull request with latest snapshot versions from metadata.xml

on:
  repository_dispatch:
    types: [create-pull-request]

name: Create Pull Request

jobs:

  createPullRequest:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: update versions in Dockerfile
        run: |
          cd "./${{env.SERVICE_LOCATION}}"
          sh ./build_version.sh

      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v3
        with:
          token: ${{ secrets.TOKEN }}
          commit-message: updated Dockerfile with latest snapshot jar versions
          committer: Chandra Keshav Mishra <ckm007@users.noreply.github.com>
          body: |
            Version update
            - Contains latest version changes for all the jars.
            - Auto-generated by [create-pull-request][1]

            [1]: https://github.com/ckm007/create-pull-request
          title: 'Version update in Dockerfile'
          labels: version update, automated pr
          assignees: ckm007
          reviewers: ckm007
          milestone: 1
          branch: version-patches
